<div class="minilivro" id="mini27">
  <h2>AWS Athena: O OrÃ¡culo da Nuvem que Responde Suas Perguntas de SQL Sobre o Tesouro no S3! â˜ï¸ğŸ—£ï¸ğŸ”</h2>

  <p>OlÃ¡ de novo, Desbravador(a) analÃ­tico(a)!</p>
  <p>
    Seu tesouro estÃ¡ seguro e escalÃ¡vel no AWS S3 â˜ï¸ğŸ“¦ğŸ’. Mas dados guardados sÃ³ tÃªm valor quando analisados! Para consultar grandes volumes de dados direto do S3, sem baixar nada, existe o <b>AWS Athena</b>.
  </p>

  <div class="analogia">
    <b>Analogie:</b> AWS ATHENA Ã© o ORÃCULO SÃBIO na Nuvem ğŸ—£ï¸ğŸ” que "lÃª" o conteÃºdo do seu BaÃº S3 ğŸ“¦ğŸ’ e responde a perguntas na linguagem SQL ğŸ”‘, sem tirar o tesouro do lugar.
  </div>
  <p><b>Mental Trigger:</b> ATHENA = ORÃCULO SQL para S3 â˜ï¸ğŸ—£ï¸ğŸ”‘.</p>

  <h3>O Que Ã© AWS Athena? Seu Motor de Query SQL no S3! ğŸ§ â˜ï¸</h3>
  <ul>
    <li><b>Serverless:</b> NÃ£o precisa configurar ou gerenciar servidores. SÃ³ escreve SQL e roda!</li>
    <li><b>Pague pela Query:</b> VocÃª paga pela quantidade de dados lidos no S3.</li>
    <li><b>SQL PadrÃ£o:</b> Usa SQL popular (Presto/Trino).</li>
    <li><b>LÃª direto do S3:</b> NÃ£o precisa importar para um banco tradicional.</li>
  </ul>

  <h3>Como o OrÃ¡culo Consulta o Tesouro? (O Mecanismo) âš™ï¸</h3>
  <ol>
    <li><b>Definir a Estrutura (Schema):</b> Diga ao Athena (e ao Data Catalog) quais colunas e tipos seus arquivos possuem.</li>
    <li><b>Criar uma Tabela no Athena:</b> Uma tabela virtual aponta para a localizaÃ§Ã£o dos arquivos no S3. SÃ³ armazena metadados!</li>
    <li><b>Rodar Queries SQL:</b> Escreva queries usando a tabela criada. Athena lÃª apenas o necessÃ¡rio para responder.</li>
  </ol>
  <pre><code class="language-sql">CREATE EXTERNAL TABLE IF NOT EXISTS meu_banco.vendas_s3 (
  produto string,
  valor float,
  quantidade int,
  cidade string,
  data date
)
ROW FORMAT DELIMITED
  FIELDS TERMINATED BY ','
STORED AS TEXTINPUTFORMAT
LOCATION 's3://nome-unico-do-meu-balde/dados/vendas/';
  </code></pre>

  <h3>Por Que Usar o OrÃ¡culo Athena? âœ¨ğŸ”</h3>
  <ul>
    <li><b>AnÃ¡lise Ad-Hoc RÃ¡pida:</b> Consultas rÃ¡pidas sem mover dados.</li>
    <li><b>Custo-BenefÃ­cio:</b> Paga pelo uso, ideal para grandes volumes e consultas esporÃ¡dicas.</li>
    <li><b>Simplicidade:</b> Sem infraestrutura para manter.</li>
    <li><b>IntegraÃ§Ã£o com S3:</b> LÃª direto do armazenamento barato e durÃ¡vel.</li>
  </ul>

  <h3>Consultando o OrÃ¡culo: Queries no AWS Athena! ğŸ—£ï¸ğŸ”‘</h3>
  <pre><code class="language-sql">-- 5 produtos mais caros
SELECT produto, AVG(valor) as media_valor_venda
FROM vendas_s3
GROUP BY produto
ORDER BY media_valor_venda DESC
LIMIT 5;

-- Total de vendas em SP em Outubro/2023
SELECT COUNT(*) as total_vendas
FROM vendas_s3
WHERE cidade = 'SP'
  AND data BETWEEN DATE '2023-10-01' AND DATE '2023-10-31';

-- Cidades com total de vendas &gt; 1000
SELECT cidade, SUM(valor) as total_valor_cidade
FROM vendas_s3
GROUP BY cidade
HAVING SUM(valor) &gt; 1000.00;
  </code></pre>
  <p>VocÃª pode usar JOINs se tiver mais tabelas no Athena!</p>

  <h3>Otimizando Perguntas para o OrÃ¡culo (Economizando Ouro! ğŸ’°ğŸ’¡)</h3>
  <ul>
    <li><b>Selecione sÃ³ o necessÃ¡rio:</b> Evite SELECT *. Escolha apenas as colunas que precisa.</li>
    <li><b>Filtre ao mÃ¡ximo:</b> WHERE bem usados reduzem dados lidos (e custo).</li>
    <li><b>Particione seus dados:</b> Organize arquivos por pasta (ano, mÃªs, etc.) e configure partiÃ§Ãµes na tabela. Queries filtrando partiÃ§Ãµes leem menos dados.</li>
    <li><b>Use formatos colunares (Parquet/ORC):</b> Athena lÃª sÃ³ as colunas usadas na query, reduzindo custo e acelerando execuÃ§Ã£o.</li>
  </ul>
  <div class="analogia">
    <b>Mental Trigger OtimizaÃ§Ã£o:</b> Pague pela Leitura! ğŸ¤” Use SELECTs e WHERE inteligentes, partiÃ§Ãµes e Parquet/ORC para consultas rÃ¡pidas e baratas!
  </div>

  <h3>Onde o OrÃ¡culo Athena Ajuda o Desbravador? ğŸ—ºï¸</h3>
  <ul>
    <li><b>AnÃ¡lise Ad-Hoc de Logs:</b> Consultar grandes volumes de logs salvos no S3.</li>
    <li><b>ExploraÃ§Ã£o Inicial de Dados:</b> Entenda rapidamente o conteÃºdo no S3 antes de importar para um DW.</li>
    <li><b>Dados do S3 para BI:</b> Conecte Tableau, Power BI direto ao Athena para visualizar dados do S3.</li>
  </ul>

  <h3>Recapitulando o OrÃ¡culo SQL no S3! ğŸ§ â˜ï¸ğŸ—£ï¸ğŸ”ğŸ”‘</h3>
  <ul>
    <li><b>AWS Athena:</b> Consulta interativa sobre dados no S3 usando SQL.</li>
    <li><b>CaracterÃ­sticas:</b> Serverless, pague pela query, SQL padrÃ£o.</li>
    <li><b>Como funciona:</b> Crie tabela virtual apontando para S3. Athena lÃª dados na hora da query.</li>
    <li><b>OtimizaÃ§Ã£o:</b> SELECT especÃ­ficos, WHERE, partiÃ§Ãµes, Parquet/ORC.</li>
  </ul>

  <h4>PrÃ³ximos Passos na Nuvem com Dados... ğŸ—ºï¸â˜ï¸</h4>
  <ul>
    <li>Com seus dados no S3, explore outros serviÃ§os AWS integrados para processamento e anÃ¡lise avanÃ§ada.</li>
  </ul>
  <p>
    Use Athena como seu OrÃ¡culo SQL na nuvem para responder perguntas poderosas sobre grandes tesouros de dados â€” sem sair do S3! ğŸ’ª
  </p>
</div>
